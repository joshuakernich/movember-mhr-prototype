<!DOCTYPE html>
<html>
<head>
	<title>Workshop Demo</title>
	<style type="text/css">
		.screen, .screen-container, .facilitator-screen{
			width: 400px;
			height: 700px;
			margin: auto;
			background: white;
			text-align: center;
			
			position: relative;
			display: inline-block;
			vertical-align: top;
			
			color: white;
			background: black;
			overflow: hidden;
			vertical-align: middle;
		}

		.facilitator-screen{

		}


		.screen{
			position: absolute;
			top: 0px;
			left: 0px;
		}

		.remember{
			position: absolute;
			top: 0px;
			left: 0px;
			width: 100%;
			height: 100%;
			background: rgba(255,255,255,0.8);
			overflow-y: auto;
			text-align: left;
			color: black;
		}

		.remember-header{
			background: #1C44CE;
			padding: 10px 0px 0px;
			position: relative;
			text-align: center;
		}

		.remember-content{
			padding: 0px 10%;
		}

		.remember-header h1{
			font-size: 45px;
			color: white;
			font-family: "HeaderFont";
			text-transform: uppercase;
		}

		.remember-header h2{
			color: white;
			font-family: "HeaderFont";
			font-size:30px;

		}

		.screen-trailer h1{
			font-size: 2.5rem;
			color: white;
			font-family: "HeaderFont";
			text-transform: uppercase;
			font-weight: normal;
		}

		@font-face {
			font-family: "HeaderFont";
			src: url("./font-teko/Teko-Regular.ttf");
		}

		@font-face {
			font-family: "BodyFont";
			src: url("./Overpass-Light.ttf");
		}

		@font-face {
		  font-family: BodyFont;
		  src: url("./Overpass-Bold.ttf");
		  font-weight: bold;
		}	

		body{
			background: #333;
			font-family: "BodyFont";
			text-align: center;
			margin: 0px;
			padding: 0px;
		}

		@keyframes jiggle{
			0%{
				transform: rotate(1deg);
			}
			100%{
				transform: rotate(-1deg);
			}
		}

		.sticker{
			display: inline-block;
			margin: 15px;
			position: relative;	

			animation-name: jiggle;
			animation-iteration-count: infinite;
			animation-duration: 0.2s;
			cursor: pointer;
		}

		.sticker.still{
			animation: none;
			cursor: default;
		}

		.sticker.image{
			width: 200px;
			height: 150px;
			background-size: contain;
			background-position: center;
			background-repeat: no-repeat;
		}

		.sticker.text{
			padding: 5px 10px 0px;
			border: 3px solid white;
			color: white;
			font-weight: normal;
		
			transform: rotate(-5deg);
			background: orange; 
			text-transform: uppercase;
			font-size: 40px;
			box-shadow: 0px 1px 5px rgba(0,0,0,0.3);
			font-family: "HeaderFont";
			text-shadow: 0px 2px 0px #F25031;
			white-space: nowrap;
		}

		.sticker.text.n0{ background: #F7B752; text-shadow: 0px 2px 0px red; }
		.sticker.text.n1{ background: #99DB4D; text-shadow: 0px 2px 0px green; }
		.sticker.text.n2{ background: #82C8F2; text-shadow: 0px 2px 0px blue; }
		.sticker.text.n3{ background: #E66376; text-shadow: 0px 2px 0px red; }

		video{
			position: relative;
			
			transition: all 0.5s;
		}

		.timer{
			position: absolute;
			width: 100%;
			left: 0px;
			bottom: -10px;
			height: 10px;
			transition: 5s all;
			transition: all 0.5s;
			background: rgba(0,0,0,0.5);
			line-height: 0px;
			transition: all 2s;
		}	

		.timer .timer-ticker{
			background: white;
			height: 100%;
			display: inline-block;
			width: 50%;

		}

		.timer.active{
			bottom: 100px;
		}

		.overlay,.reflection-overlay{
			position: absolute;
			top:0px;
			left: 0px;
			width: 100%;
			height: 100%;
			padding-top: 100px;
			box-sizing: border-box;
			pointer-events: none;
		}

		.overlay:after,.overlay:before{
			content: "";
			position: absolute;
			bottom: -110px;
			left: 0px;
			height: 100px;
			background: #111;
			width: 100%;
			text-align: center;
			transition: all 0.5s;
		}

		.overlay:after{
			top: -110px;
			bottom: auto;
		}

		.overlay.active:before{
			transition: all 2s;
			bottom: 0px;
		}

		.overlay.active:after{
			transition: all 2s;
			top: 0px;
		}

		.sticker-party{
			position: absolute;
			top: 100px;
			left: 0px;
			text-align: center;
			width: 100%;

		}

		video.zoom{
			transform: scale(2);
			transition: all 5s;
		}

		.options{
			display: inline-block;
			vertical-align: middle;
			margin: 10px;
			padding: 10px;
			background: white;
		}

		input{
			color: white;
		}

		.overlay{
			pointer-events: none;
		}

		.play{
			width: 100%;
			height: 100%;
			position: absolute;
			top:0px;
			left:0px;
			font-size: 100px;
			color: white;
			background: transparent;
		}

		.stop{
			display: none;
			position: absolute;
			top:0px;
			left: 0px;
			width: 100%;
			height: 100%;
			padding-top: 100px;
			box-sizing: border-box;
			background: rgba(0,0,0,0.5);
			color: white;
		}


		
		.next, .next-screen, .carry-on{
			display: block;
			width: 80%;
			margin: 0px 10%;
			font: inherit;
			margin-bottom: 10px;
			padding: 5px 0px 0px;
			color: white;
			background: #1C44CE;
			font-size: 1.2em;
			border: none;
			font-family: "HeaderFont";
			text-transform: uppercase;
			font-size: 1.8em;
			font-weight: normal;
		}

		.primer{
			text-align: center;
		}

		.next.half{
			width: 40%;
			margin: 0px;
			margin: 20% 3% 0px;

			display: inline-block;
		}

		.next-screen, .carry-on{
			position: absolute;
			bottom: 40px;
		}

		.swipe-prompt{
			display: none;
			position: absolute;
			top:0px;
			left:0px;
			right: 0px;
			bottom: 0px;
			opacity: 1;
			transition: 1s all;

		}

		.swipe-prompt.swiping{
			opacity: 0;
		}

		.prompt{
			font-family: "HeaderFont";
			background: #1C44CE;
			padding: 5px 10px 0px;
			border-radius: 5px;
			display: inline-block;
			color: white;
			text-transform: uppercase;
			font-size: 35px;
			position: relative;
			text-align: center;
			top: -30px;
		}

		.prompt:after{
			content: "";
			width: 0; 
			height: 0; 
			border-left: 20px solid transparent;
			border-right: 20px solid transparent;
			border-top: 20px solid #1C44CE;

			display: block;
			position: absolute;
			bottom: -20px;
			left: calc(50% - 20px);
		}

		.stop-banner{
			background: #1C44CE;
			padding: 20px;
			text-align: center;
		}

		.primer h1, .phone-down h1{
			font-family: "HeaderFont";
			padding: 0px;
			margin:0px;
			font-weight: normal;
			font-size: 3em;
			line-height: 3rem;
		}



		.stop-banner h1{
			font-family: "HeaderFont";
			padding: 0px;
			margin:0px;
			font-weight: normal;
			font-size: 5em;
		}

		.stop-banner h2{
			font-family: "BodyFont"
			padding: 0px;
			margin:0px;
			font-weight: normal;
			font-size: 1em;
		}

		.swipe-prompt{
			background: rgba(0,0,0,0.4);
		}

		.finger{
			position: absolute;
			left:20%;
			top:20%;
			width: 0px;
			height: 0px;

			animation-name: swipe;
			animation-iteration-count: infinite;
			animation-duration: 1.5s;
		}

		.finger:after{
			content: "";

			width: 100px;
			height: 100px;
			background-image: url('./finger.png');
			background-size: contain;
			background-position: center;
			background-repeat: no-repeat;
			
			position: absolute;
			left: -50px;
			top: 0px;
			display: block;
		}

		@keyframes swipe{
			0%{
				opacity: 0;
				left:20%;
				top:20%;
				transform: rotate(-15deg);
			}
			10%{
				opacity: 1;
				left:20%;
				top:20%;
				transform: rotate(-15deg);
			}
			30%{
				left:70%;
				top:30%;
				transform: rotate(15deg);
			}
			60%{
				left:30%;
				top:40%;
				transform: rotate(-15deg);
			}
			90%{
				left:80%;
				top:50%;
				transform: rotate(25deg);
				opacity: 1;
			}
			100%{
				left:80%;
				top:50%;
				transform: rotate(25deg);
				opacity: 0;
			}
		}


		.nav{
			background: #1C44CE;
			box-shadow: inset 0px 25px 0px rgba(255,0,0,0.3);
			display: inline-block;
			position: relative;
		}	

		.nav:before{
			content:'faciltator';
			color: white;
			padding: 0px 10px;
		}

		.nav:after{
			content:'student';
			color: white;
			position: absolute;
			left: 0px;
			bottom: 0px;
			padding: 0px 10px;
		}

		.nav button{
			display: inline-block;
			
			height: 48px;
			width: 30px;
			margin: 1px;
			font-family: "BodyFont";
			border: none;
			position: relative;
			background: rgba(255,255,255,0.5);

			
			cursor: pointer;
			outline: none;
			vertical-align: top;

		}

		.nav button.is-for-facilitator{
			height: 22px;
		}

		.nav button.is-for-student{
			height: 22px;
			vertical-align: bottom;
		}

		.nav button.active{
			background: yellow;
		}



		.workshop-handoff{
			position: absolute;
			top: 0px;
			left: 0px;
			right: 0px;
			bottom: 0px;
			background: #1C44CE;
			display: none;

			box-sizing: border-box;
			
			font-size: 25px;
			font-family: "HeaderFont";
			background-position: center;
			background-repeat: no-repeat;
			background-size: 150px;
		}

		.workshop-handoff h1{
			font-size: 35px;
		}

		.workshop-timer{
			position: absolute;
			top: 0px;
			left: 0px;
			right: 0px;
			bottom: 0px;
			background: #1C44CE;
			display: block;

			box-sizing: border-box;
			padding-top: 50px;
			font-size: 25px;
			font-family: "HeaderFont";
			background-position: center;
			background-repeat: no-repeat;
			background-size: 150px;

		}

		.workshop-timer button{
			border: 1px solid white;
		}



		

		.static{
			position: absolute;
			top: 0px;
			left:0px;
			right: 0px;
			bottom: 0px;
			background-size: cover;
			background-position: center;
			background-repeat: no-repeat;
		}

		.popup{
			transform: scale(0);
			transition: all 0.5s;
		}

		.popup.reveal{
			transform: scale(1);
		}

		.stopwatch{
			width: 200px;
			height: 200px;
			border: 10px solid white;
			border-radius: 150px;
			margin: auto;
			box-sizing: border-box;
			position: relative;
		}

		@keyframes tick{
			0%{
				transform: rotate(0deg);
			}
			100%{
				transform: rotate(360deg);
			}
		}

		.stopwatch:after,.stopwatch:before{
			content: "";
			width: 40px;
			height: 10px;
			background: white;
			position: absolute;
			top: -10px;
			left: 10px;
			transform: rotate(-30deg);
		}

		.stopwatch:after{
			left: 130px;
			transform: rotate(30deg);
		}

		.stopwatch-hand{
			width: 2px;
			height: 80px;
			position: absolute;
			left: 89px;
			top: 15px;
			background: white;
			animation: tick;
			animation-duration: 30s;
			transform-origin: 1px 79px;
			animation-iteration-count: infinite;
			animation-timing-function: steps(240);
		}

		.stopwatch-hand:after{
			content: "";
			width: 10px;
			height: 10px;
			position: absolute;
			border: 2px solid white;
			position: absolute;
			bottom: -5px;
			left: -5px;
			border-radius: 100px;
			background: #1C44CE;
		}

		.flashy-play-button{
			color: #1C44CE;
			border: 5px solid #1C44CE;
			position: absolute;
			left: 0px;
			right: 0px;
			top: 220px;
			width: 70px;
			height: 70px;
			margin: auto;
			background: none;
			font-size: 30px;
			border-radius: 100px;


		}

		.qr-prompt{
			color: blue;
			width: 100%;
			height: 100%;
			padding-top: 20px;
			position: relative;
		}

		.qr-prompt img{
			width: 150px;
		}


		.instruct{
			position: absolute;
			top: 0px;
			left: 0px;
			width: 100%;
			height: 100%;
			
			text-align: left;
			padding: 30px;
			box-sizing: border-box;
			color: black;
			overflow-y: auto;
		}

		.instruct h1{
			font-family: "HeaderFont";
			padding: 0px;
			margin:0px;
			font-weight: normal;
			font-size: 2.5em;
			color: rgba(28,68,206);
			text-align: center;
		}

		.faux-phone{
			width: 120px;
			height: 200px;
			display: block;
			margin: auto;
			border: 5px solid white;
			position: relative;
			border-radius: 20px;
			overflow: hidden;
			background: #555;
		}

		.faux-phone:before{
			content: "";
			width: 50%;
			position: absolute;
			top: 0px;
			left: 25%;
			height: 5%;
			background: white;
			display: block;
			border-radius: 0px 0px 10px 10px;
		}

		.faux-phone:after{
			content: "";
			width: 60%;
			height: 100%;
			position: absolute;
			top: 0px;
			left: 30%;
			background: white;
			display: block;
			opacity: 0.4;
			transform: skewX(20deg);
			background: linear-gradient( to top, white, transparent);
		}

		.card-deck-instruct{
			position: absolute;
			top: 30px;
			left: 10px;
			right: 10px;
			bottom: 30px;
		}

		.card{
			width: 100%;
			height: 100%;
			
			background: #777;
			border: 1px solid rgba(255,255,255,0.3);
			position: absolute;
			top: 0px;
			left: 0px;
			border-radius: 20px;

			
			background-size: 80%;
			background-position: center;
			background-repeat: no-repeat;


		}

		.card-happy{
			background-image: url('./choose-positive.svg');
		}

		.card-sad{
			background-image: url('./choose-negative.svg');
		}

		.black-screen{
			background: url(./blurry-black-bg.jpeg);
			background-size: cover;
		}

		.white-screen{
			background: url(./blurry-white-bg.jpeg);
			background-size: cover;
			color: black;
		}

		.screen-timer span{
			width: 20px;
			display: inline-block;
			text-align: center;
		}

		.screen-trailer h1{
			opacity: 0;
			animation: throb;
			animation-duration: 14s;
			animation-iteration-count: infinite;
		}

		.screen-trailer h1:nth-of-type(2){
			animation-delay: 7s;
		}

		@keyframes throb{
			60%{
				opacity: 0;
			}

			70%{
				opacity: 1;
			}

			90%{
				opacity: 1;
			}

			100%{
				opacity: 0;
			}
		}

		


		

		.mini-icon{
			width: 20px;
			height: 20px;
			background: black;
			border-radius: 5px;
			display: inline-block;
			vertical-align: middle;
			margin-right: 5px;
			background-image: url('./app-icon.png');
			background-size: cover;
		}

		.home-screen h1{
			font-weight: normal;
			font-size: 100px;
			margin-bottom: 0px;
			padding: 0px;
			line-height: 100px;
		}

		.home-screen h2{
			font-weight: normal;
			font-size: 20px;
			margin-top: 20px;
			padding: 0px;
			line-height: 20px;
		}

		.push{
			margin: 10px;
			padding: 10px;
			background: rgba(0,0,0,0.3);
			border-radius: 10px;
			text-align: left;
		}

		.push h1{
			font-size: 12px;
			color: gray;
			margin: 0px;
			padding: 0px;
			line-height: 20px;
		}


	</style>
	<script type="text/javascript" src='./jquery-3.4.1.min.js'></script>
	<script type="text/javascript">
		$(function(){

			function onNav(){
				var idx = $('.nav button').index(this);
				toScreen(idx);
			}

			$('.screen').each(function(i){
				var $b = $('<button>'+(i+1)+'</button>').appendTo('.nav').click(onNav);

				if($(this).hasClass('is-for-facilitator')) $b.addClass('is-for-facilitator');
				if($(this).hasClass('is-for-student')) $b.addClass('is-for-student');
			})

			var isWorkshopMode = (window.location.href.indexOf('student')>-1);

			if(isWorkshopMode){
				toScreen(2);
			} else {
				toScreen(0);
			}
			

			var MESS = 9;
			
			var SCATTER = [
				{at:0.5,x:0.25,y:0.2,scale:1},
				{at:0.65,x:0.75,y:0.8,scale:0.8},
				{at:0.8,x:0.75,y:0.1,scale:1.1},

				{at:0.85,x:0.25,y:0.9,scale:1},
				{at:0.88,x:0.4,y:0.05,scale:1.2},
				{at:0.90,x:0.6,y:0.95,scale:1.3},

				{at:0.92,x:0.7,y:0.3,scale:1.6},
				{at:0.94,x:0.3,y:0.7,scale:1.8},
				{at:0.95,x:0.5,y:0.5,scale:2.2},
	
			]
			//var SCATTER = {cx:200,cy:350,rx:200,ry:350}
			var iMoment = 0;
			var iReflection = 0;

			var moments = [
				{start:32,end:40,options:['DISASTER!','./sticker/explosion.png','$^#&%!']},
				{start:60,end:70,options:['SO EMBARASSING!','MASSIVE FAIL!','./sticker/facepalm.png']},
				{start:90,end:100,options:['100% LOSER','DISAPPOINTED','SCREW-UP']},
			]
			
			var videoLive;
			var iVideoTicker;
			var iTimerTick;
			var timerStart;
			var timerDuration;
			var $sCurrent;

			function tickSticker(){
				if(moments[iMoment] && !moments[iMoment].isShown && videoLive.currentTime > moments[iMoment].start){
					moments[iMoment].isShown = true;

					$('.overlay').empty();
					$('.sticker-party').empty();

					$("<div class='prompt'>What's he thinking?</div>").appendTo('.sticker-party');
					$("<br>").appendTo('.sticker-party');

					for(var s in moments[iMoment].options){
						var $s = $('<div class="sticker n'+s+'">').appendTo('.sticker-party').click(onSticker);

						if(moments[iMoment].options[s][0] == '.') $s.addClass('image').css({'background-image':'url('+moments[iMoment].options[s]+')'});
						else $s.addClass('text').html(moments[iMoment].options[s]);

						$("<br>").appendTo('.sticker-party');
					}
					$('.overlay').addClass('active');
				}

				if(moments[iMoment] && videoLive.currentTime > moments[iMoment].end){
					videoLive.playbackRate = 0;
				}

				if(moments[iMoment] && videoLive.currentTime > moments[iMoment].start){
					$('.timer').addClass('active');
					var p = (videoLive.currentTime-moments[iMoment].start)/(moments[iMoment].end-moments[iMoment].start);
					$('.timer-ticker').width(p*100+'%');
				}
			}


			var STICKERS_START_AT = 25;
			var STICKERS_END_AT = 42;

			function tickReflection(){

				if(videoLive.currentTime > SCATTER[iReflection].at*videoLive.duration){

					var $overlay = $('.reflection-overlay');

					while(stickerPack.length < moments.length){
						var $s =  $('<div class="sticker still text n'+stickerPack.length+'">').text(moments[stickerPack.length].options[stickerPack.length]);
						stickerPack.push($s);
					}
					
					var progress = iReflection/MESS;
					var drain = 1 - progress*progress*progress;


					var iRandom = Math.floor(Math.random()*stickerPack.length);
					iRandom = iReflection%stickerPack.length;
					var $s = stickerPack[iRandom].clone().appendTo($overlay);

					//var scale = 0.7 + iReflection * 0.1 + Math.random()*0.2;


					//if(iReflection == SCATTER.length-1) scale = 2.2;
					scale = SCATTER[iReflection].scale;

					$s.css({margin:0,transform:'scale('+scale+') rotate('+(-20+Math.random()*40)+'deg)'});
					//$s.css({transform:'scale(1)',margin:0});

				
					var r = (iReflection*137.5)*(Math.PI/180);

					var x = SCATTER[iReflection].x*400 - $s.outerWidth()/2;
					var y = SCATTER[iReflection].y*700 - $s.outerHeight()/2;
					/*var x = SCATTER.cx + Math.cos(r)*SCATTER.rx*drain;
					var y = SCATTER.cy + Math.sin(r)*SCATTER.ry*drain;


					x = Math.max(0,Math.min(400-200,x));
					y = Math.max(0,Math.min(700-100,y));*/

					$s.css({position:'absolute',left:x,top:y,margin:0});
					
					
					iReflection++;
				}
			}

			function forceSelection(){
				$('.sticker').eq(0).trigger('click');
			}

			/*function onStopSticker(e){

				var o = $(this).offset();

				$('.sticker-party .sticker').each(function(){
					var o2 = $(this).offset();
					var dx = o2.left-o.left;
					var dy = o2.top-o.top;
					var d = Math.sqrt(dx*dx+dy*dy);

					if(d == 0){
						dx = dy = 50;
					}

					if(d<150) $(this).addClass('dying').animate({top:'+='+dy*5,left:'+='+dx*5},500,function(){
						
						$(this).css({opacity:0});
						if($('.sticker:not(.dying)').length == 0){
							$('.swipe-prompt').hide();
							$('.remember').show();
						}
					});
				})
			}*/
			
			var stickerPack = [];

			function onSticker(e){

				var $screen = $(e.target).closest('.screen');
				var $party = $screen.find('.sticker-party');

				$party.empty();
				$(e.target).addClass('still').appendTo($party).css({top:'150px',transform:'scale(2) rotate(-5deg)'}).delay(2000).animate({opacity:0});
				$screen.find('.overlay').removeClass('active');
				$screen.find('.timer').removeClass('active');
				iMoment++;

				stickerPack.push( $(e.target).clone() );

				videoLive.playbackRate = 1;
			}

			$('video').on('ended',onVideoEnd);

			function onVideoEnd(){
				if($(videoLive).closest('.screen-stop-swipe').length){
					$('.stop').show();

					if(!isWorkshopMode){
						setTimeout(function(){
							var o = $('.screen-container').offset();
							$('.qr-prompt').css({display:'inline-block',opacity:0,left:200}).animate({opacity:1,left:0},1000);
							$('.screen-container').css({left:200}).animate({top:0,left:0},1000);
						},1500);
					}
					
				}
				else{
					nextScreen(this);
				} 
			}

			$('.stop button').click(function(){
				$('.stop').hide();
				$('.swipe-prompt').show();

				var iTickStick = setInterval(function(){

					$('.dead').each(function(){
						var d = $(this).data();
						var p = $(this).position();
						d.dy += 1;
						p.left += d.dx;
						p.top += d.dy;
						$(this).css(p);

						if(p.top>900) $(this).addClass('gone')
					});


					if($('.screen-stop-swipe .sticker').length == $('.gone').length){
						clearInterval(iTickStick);
						nextScreen($('.stop'));
						
					}

				},20);
			});

			var isMouseDown = false;

			

			$('.swipe-prompt').on('mousedown',function(e){
				$(this).addClass('swiping');
				isMouseDown = true;

				var o = $('.screen').offset();

				wasx = e.pageX - o.left;
				wasy = e.pageY - o.top;
			})

			$(window).on('mouseup',function(){
				isMouseDown = false;
			})

			var wasx = 0;
			var wasy = 0;

			$('.swipe-prompt').on('mousemove',function(e){
				if(isMouseDown){

					var o = $('.screen-container').offset();

					var x = e.pageX - o.left;
					var y = e.pageY - o.top;

					
					$('.sticker:not(.dead)').each(function(){
						var p = $(this).position();
						var dx = p.left + $(this).outerWidth()/2 - x;
						var dy = p.top + $(this).outerHeight()/2 - y;
						//var d = Math.sqrt(dx*dx+dy*dy);

						if(Math.abs(dx)<$(this).outerWidth()/2 && Math.abs(dy)<$(this).outerHeight()/2){
							$(this).addClass('dead').data({dx:x-wasx,dy:y-wasy});
						}
					})

					wasx = x;
					wasy = y;


				}
			});

			window.doFinishActivity = function(){
				nextScreen($('iframe'));
			}

			
			$('.click-to-hide').click(function(){
				$(this).hide();
			})

			$('.click-to-notify').click(function(){
				$('.popup').show().css({transform:'scale(1)'})
			})

			$('.click-to-next-screen').click(nextScreen);

			function nextScreen(scope){

				if(scope.target) scope = scope.target;

				var iScreen = $('.screen').index( $(scope).closest('.screen') ) + 1;

				//while(isWorkshopMode && $('.screen').eq(iScreen).hasClass('is-for-facilitator')) iScreen++;
				//while(!isWorkshopMode && $('.screen').eq(iScreen).hasClass('is-for-student')) iScreen++;

				if( iScreen < $('.screen').length ) toScreen(iScreen);
			}

			function toScreen(iScreen){

				clearInterval(iVideoTicker);
				clearInterval(iTimerTick);

				if(videoLive) videoLive.pause();

				$('.nav button').removeClass('active').eq(iScreen).addClass('active')

				var $s = $('.screen').hide().eq(iScreen).show().css({opacity:0}).animate({opacity:1},1000);

				$sCurrent = $s;

				//if($s.find('.popup').length) $s.find('.popup').addClass('reveal');

				if($s.hasClass('screen-video')){
					videoLive = $s.find('video')[0];
					videoLive.play();
				}

				if($s.hasClass('screen-stickers')){
					iVideoTicker = setInterval(tickSticker,100);
				}

				if($s.hasClass('screen-stop-swipe')){
					iVideoTicker = setInterval(tickReflection,100);
					if(isWorkshopMode) videoLive.currentTime = videoLive.duration-10;
				}

				if($s.hasClass('screen-strategy')){
					$('iframe')[0].contentWindow.postMessage('hello', '*');
				}



				if($s.is('.phone-down')){
					$s.find('.next').css({opacity:0}).delay(8000).animate({opacity:1});
				}

				if($s.find('.card-deck-instruct').length){

					/*
					
					function flickLeft(){
						$s.find('.card-front').removeClass('card-sad').addClass('card-happy').css({left:0}).animate({left:'100%'},500,flickRight);
						$s.find('.card-back').removeClass('card-happy').addClass('card-sad');
					}

					function flickRight(){
						$s.find('.card-front').removeClass('card-happy').addClass('card-sad').css({left:0}).animate({left:'-100%'},500,flickLeft);
						$s.find('.card-back').removeClass('card-sad').addClass('card-happy');
					}

					flickLeft();*/

					$s.find('.card-deck-instruct').hide();
				}

				if($s.find('.screen-timer').length){
					timerDuration = $s.find('.screen-timer').data('time') * 1000;
					timerStart = new Date().getTime();
					iTimerTick = setInterval(onTimerTick,60);
					$s.find('.faux-phone').css({top:'50vh',left:'50vw'});
				}

				if($s.find('.flashy-play-button').length){
					$s.find('.flashy-play-button').css({opacity:0}).delay(3500)
					.animate({opacity:1}).animate({opacity:0})
					.animate({opacity:1}).animate({opacity:0})
					.animate({opacity:1}).animate({opacity:0})
					.animate({opacity:1}).animate({opacity:0})
					.animate({opacity:1});
				}
				
			}

			var COUNTDOWN_BUFFER = 4;
			var timerStartProper = false;

			function onTimerTick(){
				var timerNow = new Date().getTime();
				var timerElapsed = timerNow-timerStart;

				var timerRemainingTotal = timerDuration-timerElapsed + COUNTDOWN_BUFFER*1000;
				
				var timerRemaining = timerRemainingTotal;
				if(timerRemaining>timerDuration) timerRemaining = timerDuration;

				if(timerRemainingTotal>timerRemaining){
					var gap = timerRemainingTotal-timerRemaining;
					if(gap>3000) $sCurrent.find('h1').text('-');
					else $sCurrent.find('h1').text(Math.ceil(gap/1000));
					timerStartProper = false;
				} else if(!timerStartProper){
					$sCurrent.find('h1').text("PHONE'S UP!");
					$sCurrent.find('.faux-phone').animate({top:0,left:0});
					timerStartProper = true;
				}


				if(timerRemaining < 0) timerRemaining = 0;

				var seconds = Math.floor(timerRemaining/1000);
				var jiffy = Math.floor(timerRemaining/10)%100;

				

				if(seconds<10) seconds = '0'+seconds;
				if(jiffy<10) jiffy = '0'+jiffy;

				var str = seconds+':'+jiffy;
				str = '<span>' + str.split('').join('</span><span>') + '</span>';

				$sCurrent.find('.screen-timer').html(str);
			}
		})
	</script>
</head>
<body>
	<audio autoplay loop controls style='position: fixed;top:0px;left: 0px;'>
				<source src="./Decisions.mp3" type="">
			</audio>
	<div class="screen-container">
		<div class="screen screen-trailer is-for-facilitator">
			<div class="static" style='background-image:url(./trailer.gif)'></div>
			<div class="static black-screen" style='opacity: 0.5'></div>
			<div class="static" style=''>
				<br><br>
				<img src="./the-challenge-white.png" width=300>
				<br><br><br>
				<h1>WHAT'S BEEN YOUR<br>GREATEST CHALLENGE?</h1>
				<br>
				<h1>WILL YOU<br>BOUNCE BACK?</h1>
				<button class='next-screen click-to-next-screen'>GET STARTED ></button>
			</div>
			
			
		</div>
		<div class="screen is-for-facilitator black-screen phone-down">
			<br><br><img src="./the-challenge-white.png" width=300>
				<br>
			<br><br><br>

				<h1 style="font-size: 2rem;">DOWNLOAD THE APP</h1><br>
			<img width=150 src='./qr-code.png' style="vertical-align: middle;"><br><br>
			aotg.app.com
			<button class='next-screen click-to-next-screen'>READY TO GO ></button>
			
		</div>
		<div class="screen is-for-student screen-signup">
			<div class="static click-to-next-screen" style='background-image:url(./screen-team-code.jpg)'></div>
		</div>
		<div class="screen is-for-student screen-signup">
			<div class="static click-to-next-screen" style='background-image:url(./screen-signup.jpg)'></div>
		</div>
		<div class="screen is-for-student white-screen primer">
		
				<br><br>
				<h1>WELCOME TO</h1>
				<img width=300 src='the-challenge-black.png'>
				<br><br><br><br>
				<h1>CAN WE SEND<br>A COUPLE OF<br>NOTIFICATIONS TO KEEP<br>THE CHALLENGE ALIVE?</h1>
				<button class="next half click-to-next-screen">Nah</button><button class="next half click-to-notify">Yeah</button>
			<div class="static click-to-next-screen popup" > 
				<img width='80%' style='border-radius: 10px;box-shadow: 0px 1px 5px black;margin-top:60%;' src='./popup-notification.jpg'>
			</div>
		</div>
		<div class="screen is-for-student phone-down black-screen">
			<br><br>
				<img width=300 src='the-challenge-white.png'>
				<br><br><br><br><br>
				
					<h1>PHONE DOWN</h1>
					<img width=150 src='./phone-down.png'>
					
					
					<h1>AWAIT INSTRUCTIONS</h1>
				<br><br><br><br><br>
				<button class='next click-to-next-screen'>OK GO ></button>
		</div>

		<div class="screen is-for-facilitator ">
			<h1>Intro scene</h1>
			<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
			<button class="next click-to-next-screen">Continue ></button>
		</div>
		<div class="screen is-for-facilitator phone-down black-screen">
			<br><br>
				<img width=300 src='the-challenge-white.png'>
				<br><br><br><br>
			<h1>WHAT'S BEEN<br>ONE OF YOUR MOST<br>CHALLENGING MOMENTS?</h1>
			<br><br>
			<h2 style="font-weight: normal;">...ON or OFF the field?</h2>
			<br><br><br>
			<button class="next click-to-next-screen">Continue ></button>
		</div>
		<div class='screen screen-video screen-stickers is-for-facilitator'>
			<video preload controls width="100%" height="100%;">
				<source src="./video/scene-1.mp4" type="">
			</video>
			<div class='overlay'></div>
			<div class='sticker-party'></div>
			<div class='timer'>
				<div class='timer-ticker'></div>
			</div>
		</div>
		<div class='screen screen-video is-for-facilitator'>
			<video preload controls width="100%" height="100%;">
				<source src="./video/pickup-1.mp4" type="">
			</video>
		</div>
		<div class='screen is-for-facilitator screen-video screen-stop-swipe'>
			<video preload controls width="100%" height="100%;">
				<source src="./video/reflection-1.mp4" type="">
			</video>
			<div class='reflection-overlay'></div>
			<div class='swipe-prompt'>
				<div class="finger"></div>
			</div>
			<div class='stop'>
				<div class='stop-banner'>
					<h1>STOP</h1>
					<h2>Don't get caught up in the things you can't control.</h2>
				</div>
				<br>
				<button class='next'>THERE'S A BETTER WAY ></button>
				
			</div>
		</div>
		<div class='screen is-for-facilitator white-screen'>

			<br><br><br><br>
			<div class="stop-banner">
				<img src="./icon/Choose your Thoughts.svg" width="120" style='width:100;display:block;margin:auto;'>
				<h1 style='font-size: 2.5rem;'>POSITIVE THOUGHTS</h1>
				
			</div><br><br><br><br><br><br><br><br><br><br><br><br>
				<button class="next click-to-next-screen">CARRY ON ></button>


		</div>
		<div class='screen is-for-facilitator white-screen'>
			<div class="instruct">
				<h1>POSITIVE THOUGHTS</h1>
				<img src="./choose-positive.svg" width="120" style='width:120;display:block;margin:auto;'>
					<p><b>Positive thoughts</b> are optimistic and motivational.</p>
					<li>It will be fine.</li>
					<li>No problemo.</li>
					<li>You've got this.</li>
					<li>You can do it.</li>
					<br><br><br><br><br><br><br><br><br>
				<button class="next click-to-next-screen">GOT IT ></button>
			</div>

		</div>
		<div class='screen is-for-facilitator white-screen'>
			<div class="instruct">
			<h1>INSTRUCTIVE THOUGHTS</h1>
				<img src="./choose-instructional.svg" width="120" style='width:120;display:block;margin:auto;'>
					<p><b>Instructive thoughts</b> are actionable.</p>
					<li>I just need to keep training.</li>
					<li>I need to work harder.</li>
					<li>I just need to try again.</li>
					<p><b>Instructive thoughts</b> focus on what you should do, not what you shouldn't do.</p>
					<p style="text-align: center;"><i>"I should work on my catching."</i><br>
					instead of<br><i>"Stop dropping the ball."</i></p><br><br><br><br>
				<button class="next click-to-next-screen">GOT IT ></button>
			</div>
		</div>
		<div class='screen phone-down is-for-facilitator black-screen'>
			<br><br>
				<img width=300 src='the-challenge-white.png'>
				<br><br><br><br>
				
					<h1>GET READY...</h1>

					
				<br><br>
				
				<br><br><br><br><br><br><br><br><br><br><br>
				<button class='next click-to-next-screen'>GO ></button>
		</div>
		<div class='screen phone-down is-for-facilitator black-screen screen-3-2-1'>
			<!--div class="instruct">
				<h1>OK GO!</h1>
				<div class="card-deck-instruct">
					<div class="card card-back"></div>
					<div class="card card-front"></div>
				</div>
				<h1>YOUR TEAM CODE IS "CHAMPS26"</h1>
			</div-->
			<br><br>
				<img width=300 src='the-challenge-white.png'>
				<br><br><br><br>
				
					<h1>PHONE'S UP</h1>
					<div class="faux-phone">
						<div class="card-deck-instruct">
							<div class="card card-back"></div>
							<div class="card card-front"></div>
							
						</div>
						<br><br><br>
						<h1 class="screen-timer" data-time='60'></h1>
					</div>
					
				<br><br>
				<button class='next click-to-next-screen'>NEXT ></button>
		</div>
		<div class="screen screen-strategy is-for-student white-screen">
			<iframe style='position: absolute;top:0px;left:0px;border:none;' src="./swipe-game.html" width="400px" height="700px"></iframe>
		</div>
		<div class="screen is-for-student phone-down black-screen">
			<br><br>
				<img width=300 src='the-challenge-white.png'>
				<br><br><br><br><br>
				
					<h1>PHONE DOWN</h1>
					<img width=150 src='./phone-down.png'>
					
					
					<h1>AWAIT INSTRUCTIONS</h1>
				<br><br><br><br><br>
				<button class='next click-to-next-screen'>OK GO ></button>
		</div>
		<div class='screen is-for-facilitator' style="background-image: url(./josh-face.png);background-size: 100%;">
			<div class="remember">
			<div class='remember-header'>
				<h2>REMEMBER</h2>
				<img width=100 src='./cloud-icon-white.png'>
				<h1>Choose your Thoughts</h1>
			</div>
			<div class="remember-content">

				<img src="./choose-positive.svg" width="120" style='width:120;display:block;margin:auto;'>
						<p>Choose <b>Positive thoughts</b> that are optimistic and motivational.</p>
						<li>It will be fine.</li>
						<li>No problemo.</li>
						<li>You've got this.</li>
						<li>You can do it.</li>
						<br>
					<img src="./choose-instructional.svg" width="120" style='width:120;display:block;margin:auto;'>
						<p>Choose <b>instructive thoughts</b> that are actionable and focus on what you should do.</p>
						<li>I need to keep training.</li>
						<li>I need to work harder.</li>
						<li>I should work on my catching.</li>
						<br>
					
				</div>
				<button class="next click-to-next-screen">GOT IT ></button>
			</div>
		</div>
		<div class="screen screen-video is-for-facilitator">
			<video preload controls width="100%" height="100%;">
				<source src="./video/scene-2.mp4" type="">
			</video>
		</div>
		<div class="screen screen-video is-for-facilitator">
			<video preload controls width="100%" height="100%;">
				<source src="./video/pickup-2.mp4" type="">
			</video>
		</div>
		<div class="screen screen-video is-for-facilitator">
			<video preload controls width="100%" height="100%;">
				<source src="./video/reflection-2.mp4" type="">
			</video>
		</div>
		<div class="screen screen-video is-for-student">
			<video preload controls width="100%" height="100%;">
				<source src="./video/recap-cropped.mp4" type="">
			</video>

		</div>
		<div class="screen screen-video">
			<video preload width="100%" height="100%;">
				<source src="./video/transition.mp4" type="">
			</video>
			<button class="flashy-play-button">►</button>
		</div>
		<div class="screen is-for-student black-screen home-screen">
			<h1>9:41</h1>
			<h2>Tuesday, September 12</h2>
			<div class="push">
				<h1><div class='mini-icon'></div> THE CHALLENGE</h1>
				<b>✊ Continue the Challenge</b><br>
				Kick on with the next episode. Watch now. 🏉
			</div>
		</div>
	</div>
	
	<br><br>
	<div class="nav">
		
	</div>

</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<title>Cards</title>
	<script type="text/javascript" src='./jquery-3.4.1.min.js'></script>
	<script type="text/javascript">
		$(function(){

			var iScreen = -1;
			var iQuestion = -1;
			nextScreen();

			function nextScreen(){
				iScreen++;
				
				var $s = $('.screen').hide().eq(iScreen).show();

				console.log($s.find('.deck-of-exploration').length);

				if($s.find('.scatter-deck').length>0){

					$s.find('.card').each(function(n){
						$(this).css({left:500,top:0}).delay(50+n*50).animate({left:0,top:0});
					});

				} else if($s.find('.deck-of-exploration').length>0){

					
					iQuestion = -1;
					$s.find('.card-q').hide();
					nextQuestion($s);


				} else {
					$s.find('.card').each(function(n){
						$(this).css({left:500,top:-50}).delay(50+n*50).animate({left:0,top:-n*3});
					});
				}

				if($s.find('.question')) $s.find('.question').css({top:-100}).delay(500+$s.find('.card').length*50).animate({top:0});
			}

			$('<button class="yesno no">').appendTo('.card').click(doNo).text('✘');
			$('<button class="yesno yes">').appendTo('.card').click(doYes).text('✔');


			$('<button class="q-yesno q-yes">').appendTo('.card-q').click(doYesQuestion).text('✔');
			$('<button class="q-yesno q-no">').appendTo('.card-q').click(doNoQuestion).text('✘');

			function nextQuestion(scope){
				
			
				iQuestion++;
				
				$(scope).closest('.screen').find('.card-q').eq(iQuestion).show();

				console.log(iQuestion,$(scope).find('.card-q').length);

				if(iQuestion>=$(scope).closest('.card').find('.card-q').length){
					console.log($(scope).closest('.card'));
					$(scope).closest('.card').delay(500).animate({left:500},500,onSwipe);
				}
			}


			function doNoQuestion(){
				$(this).addClass('selected');
				nextQuestion(this);
			}

			function doYesQuestion(){
				$(this).addClass('selected');
				nextQuestion(this);
			}

			function doNo(){
				if($(this).closest('.card').hasClass('good')) $(this).closest('.card').animate({left:-10},50).animate({left:10},100).animate({left:-10},50).animate({left:0},50);
				else $(this).closest('.card').addClass('swiped').animate({left:-500},500,onSwipe);
			}

			function doYes(){
				if($(this).closest('.card').hasClass('bad')) $(this).closest('.card').animate({left:10},50).animate({left:-10},100).animate({left:10},50).animate({left:0},50);
				else $(this).closest('.card').addClass('swiped').animate({left:500},500,onSwipe);
			}

			function onSwipe(){

				var i = $(this).closest('.screen').find('.card').index(this);

				if(i == 0) nextScreen();
			}

			$('.good').append('good');
			$('.bad').append('bad');
		})
	</script>
	<style type="text/css">
		body{
			background: #333;
		}

		.screen{
			width: 400px;
			height: 700px;
			background: #eee;
			position: relative;
			margin: auto;
			overflow-x: hidden;
			overflow-y: auto;
		}

		.deck{
			position: absolute;
			width: 350px;
			height: 525px;
			top: 150px;
			left: 25px;
		}

		.card{
			width: 100%;
			height: 100%;
			background: white;
			border-radius: 20px;
			box-shadow: 0px 1px 2px black;
			position: absolute;
			top: 0px;
			left: 0px;
			box-sizing: border-box;
			padding: 20px;
		}	

		.card button.yesno{
			width: 80px;
			height: 80px;
			box-sizing: border-box;
			border: none;
			position: absolute;
			bottom: 0px;
			background: none;
			color: #ddd;
			text-shadow: 0px -1px black;
			font-size: 40px;
			outline: none;
		}

		.scatter-deck .card button.yesno{
			width: 60px;
			height: 60px;
			font-size: 20px;
		}

		.card button.yes{
			right: 0px;
		}

		.card button.no{
			left: 0px;
		}

		h2.question{
			text-align: center;
			position: relative;
		}

		.card.instructive .no{
			display: none;
		}

		.scatter-deck .card{
			width: 160px;
			height: 250px;
			position: relative;
			display: inline-block;
			margin: 5px;
			border-radius: 20px;
		}

		.card-q:before{
			content: "Answer yes or no?"
		}

		.q-yesno{
			padding: 10px;
			margin: 5px;
		}

		.q-yesno.selected{
			background: yellow;
		}

		.deck-of-exploration .yes, .deck-of-exploration .no{
			display: none;
		}

		.deck-of-death .yes{
			display: none;
		}

		.deck-of-selection .no{
			display: none;
		}

	</style>
</head>
<body>
	<div class="screen">
		<h2 class="question">Swipe away anything<br>he CAN'T control.</h2>
		<div class="deck scatter-deck deck-of-death">
			<div class="card bad"></div>
			<div class="card good"></div>
			<div class="card bad"></div>
			<div class="card bad"></div>
			<div class="card good"></div>
			<div class="card good"></div>
		</div>
	</div>
	<div class="screen">
		<h2 class="question">Choose One.</h2>
		<div class="deck scatter-deck deck-of-selection">
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
		</div>
	</div>
	<div class="screen">
		<h2 class="question">Let's explore this card.</h2>
		<div class="deck deck-of-exploration">
			<div class="card">
				<div class="card-q"></div>
				<div class="card-q"></div>
				<div class="card-q"></div>
				<div class="card-q"></div>
			</div>
		</div>
	</div>
	<div class="screen">
		<div class="deck">
			<div class="card instructive">
				<h1>POSITIVE THOUGHTS</h1>
				<img src="./choose-positive.svg" width="120" style='width:120;display:block;margin:auto;'>
					<p><b>Positive thoughts</b> are optimistic and motivational.</p>
					<li>It will be fine.</li>
					<li>No problemo.</li>
					<li>You've got this.</li>
					<li>You can do it.</li>
			</div>
		</div>
	</div>
	
	<div class="screen">
		<h2 class="question">Is this positive?</h2>
		<div class="deck">
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
		</div>
	</div>
	<div class="screen">
		<div class="deck">
			<div class="card instructive">
				<h1>INSTRUCTIVE THOUGHTS</h1>
				<img src="./choose-positive.svg" width="120" style='width:120;display:block;margin:auto;'>
					<p><b>Positive thoughts</b> are optimistic and motivational.</p>
					<li>It will be fine.</li>
					<li>No problemo.</li>
					<li>You've got this.</li>
					<li>You can do it.</li>
			</div>
		</div>
	</div>
	<div class="screen">
		<h2 class="question">Is this instructive?</h2>
		<div class="deck">
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
		</div>
	</div>
	<div class="screen">
		<h2 class="question">When can you use<br>INSTRUCTIVE or POSITIVE thoughts?</h2>
		<div class="deck">
			<div class="card"></div>
		</div>
	</div>
	<div class="screen">
		<h2 class="question">When can you use<br>INSTRUCTIVE or POSITIVE thoughts?</h2>
		<div class="deck">
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
		</div>
	</div>
</body>
</html>